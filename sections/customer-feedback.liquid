<div class="wrapper"> 
  <div class="section-{{ section.id }} customer-feedback">

  {% if section.settings.heading != blank %}
  <h3  class="text-center">{{ section.settings.heading }}</h3>
  {% endif %}
  
  <div id="feedback-slider">
  {% for block in section.blocks %}    
    <div>  

        {% if block.settings.customer_image != blank %}
        <div class="customer-image">
          <img src="{{ block.settings.customer_image | img_url: 'original' }}" />
        </div>
        {% endif %}

        {% if block.settings.star_rating %}
        {% assign star_number = block.settings.star_rating %}
        <div class="star-rating">
          {% for i in (1..star_number) %}
          <span class="stars"><i class="fa fa-fw fa-star"></i></span>
          {% endfor %}
        </div>
        {% endif %}

        {% if block.settings.feedback_text != blank %}
        <div class="feedback-text">
          <p>{{ block.settings.feedback_text }}</p>
        </div>
        {% endif %}

    </div>
  {% endfor %}
  </div>
  <!-- //feedback-slider -->

  </div>
</div>

{% schema %}
{
  "name": "Customer feedback",
  "class": "customer-feedback-section",
  "settings": [
  {
    "type": "text",
    "id": "heading",
    "label": "Heading"
  }],
  "blocks" : [
  {
    "type": "text",
    "name": "Text",
    "settings": [
    {
      "type": "image_picker",
      "id": "customer_image",
      "label": "Customer image"
    },
    {
      "type": "select",
      "id": "star_rating",
      "label": "Star rating",
      "options": [
      {
        "value": "1",
        "label": "1 star"
      },
      {
        "value": "2",
        "label": "2 stars"
      },
      {
        "value": "3",
        "label": "3 stars"
      },
      {
        "value": "4",
        "label": "4 stars"
      },
      {
        "value": "5",
        "label": "5 stars"
      }] 
    },
    {
      "type": "html",
      "id": "feedback_text",
      "label": "Feedback text"
    }]
  }]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}

  $('#feedback-slider').slick({
    dots: false,
    autoplay: true,
    autoplaySpeed: 5000,
    infinite: true,
    speed: 1000,
    slidesToShow: 3,
    slidesToScroll: 1,
    responsive: [
      {
        breakpoint: 1024,
        settings: {
          autoplay: true,
          autoplaySpeed: 5000,
          slidesToShow: 3,
          slidesToScroll: 1
        }
      },
      {
        breakpoint: 600,
        settings: {
          autoplay: true,
          autoplaySpeed: 5000,
          slidesToShow: 2,
          slidesToScroll: 1
        }
      },
      {
        breakpoint: 480,
        settings: {
          autoplay: true,
          autoplaySpeed: 5000,
          slidesToShow: 1,
          slidesToScroll: 1
        }
      }

      // You can unslick at a given breakpoint now by adding:
      // settings: "unslick"
      // instead of a settings object
    ]
  });

{% endjavascript %}
